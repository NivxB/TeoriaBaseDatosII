<!doctype html>
<html>
	<head>
		<title>Home</title>
		<meta charset="utf-8" />
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script type="text/javascript" src="jquery.min.js"></script>
		<link href="assets/stylesheets/bootstrap.min.css" rel="stylesheet">
		<link href="assets/stylesheets/AutoHome.css" rel="stylesheet" type="text/css"/>
		
	<body data-spy="scroll" data-target=".navbar-collapse">
		<nav id = "nav" class="navbar navbar-default">
			<div id="logo">
				<%= image_tag("ams.png", size: "100x100", alt: "") %>
			</div>
			<ul class="nav nav-tabs" id="Menu">
				
	  			<li id ="homebut" role="presentation" class="right-button" type="Button">Home</li>
	  			<li id ="ContactBut" role="presentation" class="right-button" type="Button">Contacts</li>
			</ul>
		</nav>
	
	<div id="homePrin">
		<h1 align="Center" >Nueva cita</h1>
		<h2 align="Center" >
		<p align="center">
		
		Telefono Contacto: <input id= "telefonoContacto" type="text"></input>
		<br>
		<input type="radio" name="auto" value="0" onclick="selectedAuto()" checked="checked">Auto registrado  <input type="radio" name="auto" value="1" onclick="selectedAuto()">Nuevo Auto
		<br>
		Autos: <%= select("autos", "placas", @autosCliente.collect {|p| [ p.Placa,p.id ]})%>
		<br>
		<div id="newAu">
			Placa del Auto: <input id= "placaAuto" type="text"></input>
		</br>
			Modelo del Auto: <input id= "modeloAuto" type= "text"></input>
		</br>
			Numero del Motor:	<input id= "numeroAuto" type= "text"></input>
		</div>
		<br>
			Dia de la cita: <input id= "fechaCita" type= "date"></input>
		</br>	
			Hora: <input id= "horaCita" type= "time" min="07:00:00" max="15:00:00"></input>
		</br>
		<input type="radio" name="tipo" value="0" onclick="selected()" checked="checked">Mantenimiento  <input type="radio" name="tipo" value="1" onclick="selected()">Reparacion

		<br>
		<select id="MantoSelect" name="M">
    		<option value="5000" selected="selected">5000</option>
    		<option value="10000">10000</option>
    		<option value="15000">15000</option>
    		<option value="20000">20000</option>
  		</select>
		<select id="ReparacionSelect" name="R" multiple="true">
    		<option value="fallo del motor de arranque" selected="selected">fallo del motor de arranque</option>
    		<option value="fallo en el tren delantero">fallo en el tren delantero</option>
    		<option value="ruido cerca del motor">ruido cerca del motor</option>
  		</select>

		<script>
			var Desc = "";
			$('#ReparacionSelect').hide();
			$('#MantoSelect').show();
								$('#newAu').hide();
					$('#autos_placas').show();
					$("#placaAuto").val("nil") 
			function selected(){
				if ($('input[name=tipo]:checked').val() == "0"){
					$('#ReparacionSelect').hide();
					$('#MantoSelect').show();
					
				}else{
					$('#MantoSelect').hide();
					$('#ReparacionSelect').show();
					
				}
			}
			function selectedAuto(){
				if ($('input[name=auto]:checked').val() == "0"){
					$('#newAu').hide();
					$('#autos_placas').show();
					$("#placaAuto").val("nil") 
				}else{
					$('#newAu').show();
					$('#autos_placas').hide();
					
				}
			}
			$( "#ReparacionSelect" )
				.change(function () {
					Desc = "";
				$( "#ReparacionSelect option:selected" ).each(function() {
					Desc += $( this ).text() + "|";
				});
			});
			$( "#MantoSelect" )
				.change(function () {
					Desc = "";
				$( "#MantoSelect option:selected" ).each(function() {
					Desc += $( this ).text() + " ";
				});
			});
		</script>


		<br>
		<button align="center" id="createCita" type="button" class="btn btn-lg btn"  >
					<span>Crear Cita</span>
		</button>

		</p>

		

	</div>
	<div id="ContPrin">
		<h1 align="Center" style="color: #fff;">Contact</h1>
		<p align="Center" style="color: #fff;">Hola aqui Se pondra nuestros Numeros Para todas las chicas guapas y sexis que nos quierean para haci poder tener mil novias</p>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/
	jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files
	as needed -->
	<script src="assets/javascripts/bootstrap.min.js"></script>
	<script>

	$("#ContPrin").hide();
	$("#homePrin").show();
		
		$("#homebut").click(function(){
			var url = "/homepage"
  			window.location.href=url
			
		});
	$("#ContactBut").click(function(){			
			$("#homePrin").hide();
			$("#ContPrin").show();
		});
	$("#createCita").click(function(){
  		$.ajax({
	     		url: "/nuevaCitaRegis",
	      		type: "POST",
	      		data: {telefonoContacto: $("#telefonoContacto").val(),placaAuto: $("#placaAuto").val(),modeloAuto: $("#modeloAuto").val(),numeroAuto: $("#numeroAuto").val(),fechaCita: $("#fechaCita").val(),horaCita: $("#horaCita").val() , Tipo: $('input[name=tipo]:checked').val(), Desc: Desc,idAuto: $("#autos_placas").val(),idCliente: "<%= @selectedCliente.id  %>"},
	      		success: function(data){                
  				if (data != "Error"){
  					alert(data);
  					var url = "/homepage"
  					window.location.href=url
				}
				else{
					alert("ASD")				
				}
			}
  		});
	});
	</script>
	</body>

</html>

